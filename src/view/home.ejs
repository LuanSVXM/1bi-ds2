<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../css/main.css" />
    <link rel="shortcut icon" href="../../img/logo.png" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css"
    />

    <title>ChatApp</title>
  </head>
  <body>
    <header>
      <a href="/">
      <img src="../../img/logo.png" alt="logo" />
      </a>

      <% if(logado == false) { %>

      <div>
        <a href="/login"> Logar-se </a>

        <span> ou</span>

        <a href="/registrar"> Registrar-se </a>
      </div>

      <% } else { %>

      <div>Seja Bem vindo <%= usuario.username %></div>

      <a href="/deslogar" class="deslogar">Deslogar-se</a>

      <% } %>
    </header>

    <main>
      <div class="containerpesquisahome">
        <form class="form-inline" method="post" action="/pesquisa">
          <input
            class="form-control mr-sm-2"
            type="search"
            placeholder="Pesquisar"
            aria-label="Search"
          />
          <button class="btn btn-outline-primary my-2 my-sm-0" type="submit">
            <i class="bi bi-search"></i>
          </button>
        </form>

        <% if(logado == true) { %>
        <a class="btnadicionargrupo" href="/grupos/criar">
          <span> Criar um Grupo </span>
          <i class="bi bi-plus"></i>
        </a>
        <% } %>

      </div>

      <div class="containergrupos">
        <% rows.forEach(function(entry, i, entries){ %>
          
        <div class="grupolista" onclick="location.href = '/grupos/grupodetalhe/<%= entry.id %>'">
          <div>
            <span class="iconegrupo">
              <%= entry.quantidademembros %>
              <i class="bi bi-people"></i>
            </span>
          </div>

          <div>
            <span class="nomegrupo"> <%= entry.nome %> </span>
          </div>

          <div>
            <a href="#" target="_blank"> <%= entry.username %> </a>
          </div>
        </div>

        <% }) %>
      </div>

      <div class="pagination">
        <nav aria-label="Page navigation example">
          <ul class="pagination">
            <li class="page-item">
              <a
                class="page-link"
                href="/grupos/<%= ativo > 1 ?  (ativo-1) : ativo %>"
                aria-label="Previous"
              >
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>
            <% for(let i = 1 ; i<= maxpage ; i++) { %>

            <li class="page-item">
              <a
                class="page-link <%= ativo == i ? 'active' : '' %>"
                href="/grupos/lista/<%= i %>"
                ><%= i %></a
              >
            </li>

            <% } %>

            <li class="page-item">
              <a
                class="page-link"
                href="/grupos/lista/<%= ativo < maxpage ?  (ativo+1) : ativo %>"
                aria-label="Next"
              >
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </main>

    <footer>
      <div>
        <span> Criado por </span>

        <a href="http://github.com/luansvxm" target="_blank">@LuanSVXM</a>

        <span> & </span>

        <a href="http://github.com/juliaebert2903" target="_blank"
          >@JuliaEbert</a
        >
      </div>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
